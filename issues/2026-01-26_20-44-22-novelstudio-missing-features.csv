"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"NS-010","P1","1","both","更新计划与实现 TODO 清单","调整 docs 规划与实现清单，移除已确认不做项并新增 TXT 导出、版本差异对比、最小冲突提示、资料库页面+引用等落地项。","docs/Plan.md 与 docs/issual.md 中删除“块锁定/模板块”“Docx/排版模板”“实时协作”，并新增“TXT 导出”“版本差异对比”“最小冲突提示”“资料库独立页面+章节引用”，条目与计划一致。","AUTOFRONTEND","确认两个文档条目一致且不互相矛盾；新增/删除项与计划一致，避免遗漏。","复查文档清单与 issues CSV 的任务边界一致；未出现已移除条目残留。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:16;docs/Plan.md:1;docs/issual.md:1",""
"NS-020","P0","2","both","统一日志与请求结构","定义统一日志结构与记录入口，覆盖版本 diff、AI 请求、Agent 运行记录与冲突检测，减少分散日志。","新增统一日志/helper 并在 diff、AI 请求、Agent 运行记录、冲突提示链路使用；日志包含 request_id、status、duration、payload 摘要字段；不再新增零散 console 日志。","AUTOFRONTEND","日志字段命名与格式统一；不记录敏感信息；错误级别/字段完整。","在关键路径触发日志时可定位到 request_id；无重复/缺失字段。","已完成","已完成","已完成","已提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:17;apps/web/src/api/index.ts:1;apps/web/src/app/App.tsx:1;apps/web/src/app/components/RightPanel.tsx:1;apps/web/src/utils/logging.ts:1;apps/web/src/utils/time.ts:1","picked_reason:优先处理P0且为后续AI/Agent与diff统一日志基础;done_at:2026-01-26;validation_limited:eslint failed (apps/web/src/app/components/common/ContextMenu.tsx:53 react-hooks/set-state-in-effect);manual_test:npm --workspace apps/web run lint;evidence:eslint run; only existing ContextMenu.tsx error;risk:low logging-only change"
"NS-030","P1","3","frontend","主编辑区版本 Diff 模式","在主编辑区提供版本历史差异对比视图，选中历史版本后进入只读 diff 模式，可随时退出回到可编辑态。","点击历史版本后主编辑区进入只读 diff 视图并展示当前内容与所选版本的差异；提供清晰退出入口；退出后恢复可编辑状态且内容不被修改。","AUTOE2E","diff 视图只读不写回数据；切换/退出状态管理清晰；大文档渲染不卡顿。","E2E 覆盖版本选择、进入/退出 diff、内容未被篡改；切换章节不残留 diff 状态。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:18;apps/web/src/app/components/RightPanel.tsx:1;apps/web/src/app/components/EditorPane.tsx:1",""
"NS-040","P1","4","frontend","章节批量复制/移动/合并","在 Explorer 支持多选与批量操作，包含复制、移动与合并（合并到目标章节并删除源章节）。","Explorer 支持多选（含清空/全选/范围选）；批量复制/移动/合并入口可用；合并后仅保留目标章节内容且源章节删除；操作有明确确认/回滚提示。","AUTOE2E","多选状态稳定，切换章节不丢失/错乱；合并/移动不导致数据丢失；错误提示明确。","E2E 覆盖批量复制/移动/合并场景；操作后章节树与内容一致。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:19;apps/web/src/app/components/Explorer.tsx:1",""
"NS-050","P1","5","frontend","BlockNote 侧边菜单接入 AI 按钮","在块侧边菜单直接提供 AI 操作入口，与右侧面板 action 对齐并具备完整交互状态。","块侧边菜单出现 AI 按钮；点击后触发与右侧面板相同的 AI 操作；展示 loading/失败状态；AI 结果写回块内容。","AUTOE2E","按钮不影响现有菜单操作；状态与错误处理完整；操作记录进入日志面板。","E2E 覆盖侧边菜单 AI 触发、结果写回与失败提示；不破坏原有块操作。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:20;apps/web/src/app/components/EditorPane.tsx:1",""
"NS-060","P0","6","frontend","AI 请求超时/重试/限流与设置项","为 runAiCompletion 增加超时、自动重试、限流与退避策略，并在设置面板暴露配置项。","runAiCompletion 支持 timeout、最大重试次数、并发/速率限制与 429/5xx 退避；设置面板可配置并校验；日志记录重试次数与失败原因。","AUTOE2E","重试次数有上限；超时/限流配置有默认值与校验；失败提示可定位原因。","E2E/集成测试覆盖超时、重试与限流路径；确保正常请求无性能回退。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:21;apps/web/src/api/index.ts:1;apps/web/src/app/components/SettingsPage.tsx:1",""
"NS-070","P0","7","both","Agent 串行编排与 JSON Schema 输出","Agent 支持串行执行并引入 JSON Schema 结构化输出校验，失败可重试并解析写回。","Agent 配置新增 schema 字段且可校验；多个 Agent 串行执行；输出不符合 schema 时给出错误并按策略重试；结构化结果可解析写回块内容。","AUTOE2E","schema 校验失败有明确错误；重试有上限；串行步骤状态清晰可追踪。","E2E 覆盖串行运行、schema 失败重试、成功写回；失败场景不污染内容。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:22;apps/web/src/app/components/SettingsPage.tsx:1;apps/web/src/api/index.ts:1",""
"NS-080","P0","8","both","Agent 运行记录持久化与可重放","后端持久化 Agent 请求/响应/上下文/设置，并在右侧控制台展示与重放。","后端保存运行记录（含 request_id、请求/响应、上下文、设置、状态）；右侧面板可查看历史并触发“重放”；记录中敏感字段脱敏。","AUTOE2E","持久化字段完整且脱敏；重放使用保存的配置/上下文；失败记录可回溯。","E2E 覆盖记录列表展示与重放；确认重放结果一致且无敏感泄露。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:23;apps/web/src/app/components/RightPanel.tsx:1;apps/web/src/api/index.ts:1",""
"NS-090","P1","9","frontend","资料库独立页面与章节引用插入","新增资料库独立页面并移除抽屉入口，章节可插入设定片段引用块并支持手动刷新。","资料库页面可访问且抽屉入口移除；在章节中可插入设定片段引用块（含 kb_id 与快照文本）；手动刷新可更新引用内容。","AUTOE2E","导航入口清晰且不残留抽屉；引用块结构稳定；刷新行为可控。","E2E 覆盖资料库页面访问、插入引用、刷新引用内容；不影响原章节编辑。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:24;apps/web/src/app/components/KnowledgeBaseDrawer.tsx:1",""
"NS-100","P2","10","both","TXT 导出与最小冲突提示","在预览导出中支持 TXT 下载，并在自动保存时加入最小化冲突检测与提示。","PreviewModal 提供 TXT 导出并生成纯文本文件；自动保存检测版本不一致时弹出提示，提供“覆盖/另存/重新加载”三种选择且行为可用。","AUTOE2E","TXT 内容不含 HTML；冲突提示不阻塞正常保存；选择项行为明确可追溯。","E2E 覆盖 TXT 导出与冲突提示三分支；保存后内容一致。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:25;apps/web/src/app/components/PreviewModal.tsx:1;apps/web/src/app/App.tsx:1",""
"NS-110","P0","11","both","补齐测试与回归矩阵","为新增功能补齐单测/用例/Playwright E2E，并更新回归矩阵与验收规则。","新增 Playwright E2E 覆盖 diff、批量操作、AI 重试限流、Agent 串行+schema、运行记录重放、资料库页面+引用、TXT 导出、冲突提示；回归矩阵与验收规则更新且可追踪。","AUTOE2E","测试用例与功能边界一致；数据重置安全护栏不被破坏。","完整回归跑通并记录结果；失败需有定位日志与复现步骤。","未开始","未开始","未开始","未提交","","plan/2026-01-26_20-33-37-novelstudio-missing-features.md:26;docs/Plan.md:1;docs/issual.md:1",""
